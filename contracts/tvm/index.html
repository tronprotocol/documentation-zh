<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Tvm - 波场中文文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Tvm";
    var mkdocs_page_input_path = "contracts/tvm.md";
    var mkdocs_page_url = "/contracts/tvm/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> 波场中文文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../glossary/">Glossary</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Api</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../api/http/">Http</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/rpc/">Rpc</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Architecture</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../architecture/database/">Database</a>
                </li>
                <li class="">
                    
    <a class="" href="../../architecture/network/">Network</a>
                </li>
                <li class="">
                    
    <a class="" href="../../architecture/plugin/">Plugin</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Clients</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../clients/tron-grid/">Tron grid</a>
                </li>
                <li class="">
                    
    <a class="" href="../../clients/wallet-cli/">Wallet cli</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Contracts</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../compiler/">Compiler</a>
                </li>
                <li class="">
                    
    <a class="" href="../contract/">Contract</a>
                </li>
                <li class="">
                    
    <a class="" href="../trc20/">Trc20</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Tvm</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#trontvm">Tron虚拟机TVM</a></li>
    

    <li class="toctree-l3"><a href="#tvm">TVM设计原则</a></li>
    

    <li class="toctree-l3"><a href="#tvm_1">TVM的运行过程</a></li>
    

    <li class="toctree-l3"><a href="#tvm_2">TVM的发展方向</a></li>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../developers/advanced-configuration/">Advanced configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/contribution/">Contribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/deployment/">Deployment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/incentives/">Incentives</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/java-tron/">Java tron</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/official-public-nodes/">Official public nodes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/resources/">Resources</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/run-in-idea/">Run in idea</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/tips/">Tips</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Faq</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../faq/">Home</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Introduction</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../introduction/dpos/">Dpos</a>
                </li>
                <li class="">
                    
    <a class="" href="../../introduction/">Home</a>
                </li>
                <li class="">
                    
    <a class="" href="../../introduction/overview/">Overview</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mechanism algorithm</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/account/">Account</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/dex/">Dex</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/multi-signatures/">Multi signatures</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/resource/">Resource</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/shielded-transaction/">Shielded transaction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/sr/">Sr</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/system-contracts/">System contracts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../mechanism-algorithm/trc10/">Trc10</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">波场中文文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Contracts &raquo;</li>
        
      
    
    <li>Tvm</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/tronprotocol/documentation-zh/edit/master/docs/contracts/tvm.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="trontvm">Tron虚拟机TVM</h2>
<p>波场虚拟机（Tron Virtual Machine， 简称TVM），是Tron团队为了满足自身生态发展的需求，开发出的轻量级架构、图灵完备的虚拟机， 旨在为全球百万级的开发者提供一个高效、简单、稳定、安全、且容易优化的区块链专用系统。</p>
<p>TVM能无缝对接现有的开发者生态，并且能满足DPOS共识机制的要求。TVM前期兼容以太坊虚拟机环境。开发者无需学习新的编程语言，就能用 Solidity 等编程语言在熟悉的 Remix 环境中进行智能合约的开发、调试、编译。Tron智能合约编写完毕后，上传到Tron主网当中，在超级代表节点的TVM虚拟机执行，同时保持了对虚拟机外系统环境的隔离性。</p>
<p>此外，TVM 引进了带宽的概念。不同于以太坊EVM的gas消耗模式，Tron系统中的转账和智能合约的操作是免费的，不需要消耗任何代币，所以原则上在TVM中可执行的计算总量不受代币总量限制。</p>
<h2 id="tvm">TVM设计原则</h2>
<ol>
<li>轻量级
TVM采用轻量级的虚拟机构架，旨在节省运行空间，减少资源耗费及保证系统性能。</li>
<li>稳定、安全性
TVM采用了严谨的设计规范，低粒度的底层操作码，保证了每个计算步骤的精确性，最大程度消除产生歧义的空间。 同时出于安全性的考量，TVM的转账与运行合约均不需要消耗代币，只会消耗带宽，避免了针对类似以太坊gas消耗模式的攻击。在保证了每个操作计算步骤的确定性的同时，也保证了带宽消耗的稳定性。</li>
<li>兼容性
目前，TVM能完美兼容以太坊EVM，并在未来兼容更多主流的VM。因此, 以太坊上的智能合约，能直接运行到TVM上，无缝对接现有的开发者生态，提高开发者的开发效率。开发者无需学习新的编程语言，就能用Solidity 等主流编程语言在熟悉的Remix环境中进行智能合约的开发、调试、编译，将极大缩减开发成本。</li>
<li>开发人员友好性
TVM的带宽消耗模式减少了合约的开发成本。让开发者可以把更多精力放在合约代码的逻辑本身。同时，TVM提供了对开发者友好的一站式的部署、触发、查看智能合约的接口。</li>
</ol>
<p>Tron Wallet-CLI中添加了以下对接接口，
+ deploycontract(password, contractAddress, ABI, code, data, value)
+ triggercontract(password, contractAddress, selector, data, value)
+ getcontract(contractAddress)</p>
<p>开发人员可直接调用，完成对智能合约的部署，触发，查看。</p>
<h2 id="tvm_1">TVM的运行过程</h2>
<p><img alt="Tron Virtual Machine的工作流程" src="https://raw.githubusercontent.com/ybhgenius/Documentation/master/images/Virtual_Machine/虚拟机.png" /></p>
<p>这张图整体描述了Tron Virtual Machine的工作流程：
Tron智能合约的编译 ---&gt; 虚拟机的执行、计算引擎  ----&gt;虚拟机对外的互操作层</p>
<p>简单来说，上面的流程依次是：
1. 目前Tron虚拟机主要兼容Solidity。编译器将Solidity智能合约翻译成TVM可以识别并执行的字节码。
2. 在虚拟机中，通过一条条的操作指令码实现对虚拟机栈中数据的操作处理，这个过程相当于实现对一个基于堆栈的有限状态机的逻辑处理。
3. 虚拟机通过互操作模块实现对区块链数据的访问，以及对外部数据的接口层的调用。
 </p>
<h2 id="tvm_2">TVM的发展方向</h2>
<ol>
<li>构建更加友好的调试工具
Tron团队将努力构建完善的调试工具，建立用于调试的标准符号格式或是数据格式。提升开发者在TVM的开发、调试效率。</li>
<li>满足更加多样化的任务处理需求
和以太坊上每个操作消耗gas不同，Tron虚拟机对业务的处理并不收费，每个操作只是先占据带宽，并且在交易后的一段时间后释放。开发者们只用相当小的成本 便可设计更加复杂逻辑的智能合约。我们深信，除了数字货币交易的应用场景外，未来的智能合约也能在游戏开发，金融市场风险建模，科学计算等领域发挥重要作用。Tron虚拟机的设计具有先天的满足多样化任务场景的能力，并且在对处理速度，响应时间，对浮点数的支持上作进一步的优化。</li>
<li>增加即时编译速度、整合WebAssembly。
增加即时编译的速度能够对本地代码进行更优化地编译，更快速地解读运行代码。
同时，Tron将考虑基于WebAssembly（简称WASM）进一步优化TVM虚拟机。WebAssembly 目前由 Apple、Google、 Microsoft和Mozilla牵头，为突破Web浏览器性能瓶颈而设计，并可由 C/C++ 等语言编译产生。WebAssembly应用在区块链场景上，可以提高基于Web的DApp的性能。实现整合了WASM的TVM，将会满足未来复杂业务场景对接区块链应用的高性能、高吞吐量要求。</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../developers/advanced-configuration/" class="btn btn-neutral float-right" title="Advanced configuration">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../trc20/" class="btn btn-neutral" title="Trc20"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/tronprotocol/documentation-zh" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../trc20/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../developers/advanced-configuration/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
