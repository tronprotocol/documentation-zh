
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tronprotocol.github.io/documentation-zh/mechanism-algorithm/dpos/">
      
      
        <link rel="prev" href="../../api/json-rpc/">
      
      
        <link rel="next" href="../sr/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>波场共识 - java-tron</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tron-dpos" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="java-tron" class="md-header__button md-logo" aria-label="java-tron" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            java-tron
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              波场共识
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tronprotocol/documentation-zh" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="java-tron" class="md-nav__button md-logo" aria-label="java-tron" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    java-tron
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tronprotocol/documentation-zh" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    java-tron入门
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            java-tron入门
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/getting_started_with_javatron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    入门
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    使用java-tron
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            使用java-tron
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/installing_javatron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    部署
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/backup_restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    备份和恢复
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/litefullnode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    轻节点
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/private_network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    私链网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/event/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    事件订阅
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据库配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/connecting_to_tron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络连接
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    节点监控
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using_javatron/toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    节点维护工具
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API接口
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API接口
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP 接口
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gRPC 接口
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/json-rpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonRPC 接口
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    核心协议
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            核心协议
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    波场共识
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    波场共识
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item has-children">
  <a href="#_1" class="md-nav__link" onclick="toggleChildren(event)" aria-expanded="false">
    <span class="md-ellipsis">
      概述
    </span>
  </a>
  
    <nav class="md-nav" aria-label="概述" hidden>
      <ul class="md-nav__list">
        
          <li class="md-nav__item ">
  <a href="#dpos" class="md-nav__link" >
    <span class="md-ellipsis">
      DPoS 共识机制
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item ">
  <a href="#_2" class="md-nav__link" >
    <span class="md-ellipsis">
      核心概念定义
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item ">
  <a href="#_3" class="md-nav__link" >
    <span class="md-ellipsis">
      超级代表的产块流程
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item has-children">
  <a href="#_4" class="md-nav__link" onclick="toggleChildren(event)" aria-expanded="false">
    <span class="md-ellipsis">
      超级代表的选举机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="超级代表的选举机制" hidden>
      <ul class="md-nav__list">
        
          <li class="md-nav__item ">
  <a href="#_5" class="md-nav__link" >
    <span class="md-ellipsis">
      选票
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item ">
  <a href="#_6" class="md-nav__link" >
    <span class="md-ellipsis">
      投票过程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item ">
  <a href="#_7" class="md-nav__link" >
    <span class="md-ellipsis">
      统计选票
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item has-children">
  <a href="#_8" class="md-nav__link" onclick="toggleChildren(event)" aria-expanded="false">
    <span class="md-ellipsis">
      产块机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="产块机制" hidden>
      <ul class="md-nav__list">
        
          <li class="md-nav__item ">
  <a href="#_9" class="md-nav__link" >
    <span class="md-ellipsis">
      固化块原则
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item ">
  <a href="#_10" class="md-nav__link" >
    <span class="md-ellipsis">
      最长链原则
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item ">
  <a href="#_11" class="md-nav__link" >
    <span class="md-ellipsis">
      激励模型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item ">
  <a href="#_12" class="md-nav__link" >
    <span class="md-ellipsis">
      基于提案的参数调整
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item ">
  <a href="#_13" class="md-nav__link" >
    <span class="md-ellipsis">
      参考文档
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    超级代表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    账户模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    资源模型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contracts/contract/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    智能合约
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../system-contracts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系统合约
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    去中心化交易所
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-signatures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    账户权限管理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    java-tron开发
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            java-tron开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/java-tron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开发者指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TIPs工作流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/issue-workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Issue工作流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/governance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    治理流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/run-in-idea/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    配置IDE开发环境
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开发示例
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developers/code-structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    核心模块
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Dapp开发
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Dapp开发
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contracts/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    客户端
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            客户端
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../clients/wallet-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wallet-cli
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    版本发布
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            版本发布
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/upgrade-instruction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    新版本部署手册
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/signature_verification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一致性检验
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../releases/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    历史版本
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="">
            
  
  <span class="md-ellipsis">
    附录
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            附录
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    术语表
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="tron-dpos">TRON DPoS 共识机制<a class="headerlink" href="#tron-dpos" title="Permanent link">&para;</a></h1>
<h2 id="_1">概述<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>区块链作为一种分布式账本系统，拥有遍布全球的数千甚至上万个独立节点，它们各自维护一份相同的账本副本。要将新的交易数据写入这个共享账本，必须获得这些节点的普遍认可。在固有的不可信分布式环境中实现这一目标，是一个复杂的系统工程。</p>
<p>区块链系统能够正常运行（即所有节点能够持续维护一份一致的账本），前提是系统中绝大多数节点是诚实可靠的。为了确保诚实节点能够共同监督交易数据的写入，每个区块链系统都需要建立自己的<strong>共识机制</strong>。</p>
<p>共识机制就像区块链的“宪法”，它保证了即便在不可信的分布式环境下，只要绝大多数节点遵守共识规定，系统就能达成确定且可信的结果。因此，共识机制的意义在于，它使区块链中的诚实节点能够最终就账本内容达成一致。</p>
<p>目前主流的共识机制包括工作量证明（PoW）、权益证明（PoS）和委托权益证明（DPoS）。每种机制在不同的区块链系统中都有其独特的具体实现。本文将重点介绍 <strong>TRON 网络</strong>所采用的 DPoS 共识机制，并详细阐述其核心组件和运作原理。</p>
<h3 id="dpos">DPoS 共识机制<a class="headerlink" href="#dpos" title="Permanent link">&para;</a></h3>
<p>DPoS 共识机制在区块链系统中的核心作用是选举出<strong>超级代表（Super Representative，简称 SR）</strong>，即网络的指定区块生产者（或出块节点/Block Producer）。这些 SR 负责验证交易数据并将其记录到账本中，随后将包含新账目的区块广播至全网，并获得其他节点的认可。</p>
<p>在 DPoS 共识中，系统会根据节点获得的选票数量来选定一部分节点作为区块生产者。整个选举流程具体如下：</p>
<ol>
<li>初始准备: 当区块链系统启动时，会发行一定数量的<strong>通证</strong>（例如 TRON 的 TRX）。</li>
<li>成为候选人: 节点可以消耗一部分通证来申请成为区块生产者候选人。</li>
<li>社区投票: 网络中任何持有通证的节点都可以为这些候选人投票。</li>
<li>计票选举: 每经过一个预设的时间周期（例如 <code>t</code>），系统会统计所有候选人的得票数量，得票数排名前 <code>N</code> 的节点将成为下一个时间周期内的区块生产者。</li>
<li>周期轮换: 时间周期结束后，系统会重新统计并选出新的区块生产者，如此循环往复。</li>
</ol>
<p>下面将结合 TRON 网络中的具体实现进行详细说明。</p>
<h2 id="_2">核心概念定义<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>概念</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr>
<td>TRON</td>
<td>TRON 区块链网络。本文不区分 TRON、TRON 区块链、TRON 区块链系统等概念。</td>
</tr>
<tr>
<td>TRX</td>
<td>由 TRON 区块链系统发行并在系统中流通的权益通证，代号为 <strong>TRX</strong>。</td>
</tr>
<tr>
<td>超级代表 (SR）</td>
<td>TRON 网络中获得区块生产资格的节点。TRON 设定区块生产者的数量为 <strong>27 个</strong>。下文不区分区块生产者、记账人、Witness、SuperNode、SR 等概念。</td>
</tr>
<tr>
<td>超级代表候选人</td>
<td>TRON 网络中具备成为区块生产者资格的节点。</td>
</tr>
<tr>
<td>超级代表合伙人（Super Representative Partner / SRP）</td>
<td>得票数排名第 <strong>28</strong> 至 <strong>127</strong> 名的超级代表候选人被称为<strong>超级代表合伙人</strong>。他们不参与区块生产或交易打包，但可以获得投票奖励。投票给超级代表合伙人的选民也将获得投票奖励。</td>
</tr>
<tr>
<td>生产区块 / 记账</td>
<td>指验证交易并将交易记录为账目的过程。由于 TRON 中的账目由区块承载，因此记账过程也被称为<strong>生产区块</strong>，SR 也被称为<strong>区块生产者（Block Producer）</strong>。下文不区分生产区块和记账。</td>
</tr>
<tr>
<td>出块顺序（记账顺序）</td>
<td>27 个区块生产者按照得票数量从高到低进行排序，以此确定其生产区块的顺序。</td>
</tr>
<tr>
<td>槽位（Slot）</td>
<td>在 TRON 网络中，每 <strong>3 秒钟</strong>被计为一个槽位。正常情况下，每个生产区块的 SR 都会在对应的槽位时间内完成出块。因此，TRON 的平均出块间隔约为 3 秒。如果因故 SR 未能产块，则对应的槽位会空置，下一个 SR 会在接下来的槽位内生产区块。在维护期，产块会跳过 2 个槽位。</td>
</tr>
<tr>
<td>出块轮（Epoch）</td>
<td>TRON 设定每 <strong>6 小时</strong>为一个出块轮，称为一个 <strong>Epoch</strong>。每个出块轮的最后两个出块时间是<strong>维护期</strong>。每个出块轮的维护期将决定下一个出块轮的出块顺序。</td>
</tr>
<tr>
<td>维护期</td>
<td>TRON 设定为 <strong>2 个区块时间</strong>，即 <strong>6 秒钟</strong>。此时间段用于统计候选人的得票数。由于 24 小时有 4 个出块轮，因此自然有 4 个维护期。维护期内不进行区块生产，主要用于确定下一个出块轮的生产顺序。</td>
</tr>
</tbody>
</table>
<p><img alt="维护期" src="https://raw.githubusercontent.com/tronprotocol/documentation-zh/master/images/sequence.png" /></p>
<h2 id="_3">超级代表的产块流程<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>TRON 区块链系统中的 SR 持续执行以下流程：</p>
<ol>
<li><strong>收集交易：</strong> SR 收集区块链网络中新产生的交易。</li>
<li><strong>验证交易：</strong> 对这些交易的合法性进行验证。</li>
<li><strong>打包区块：</strong> 将验证通过的交易打包在一个<strong>区块</strong>中，作为新的一页账记录到账本上。</li>
<li><strong>广播区块：</strong> 将新生成的区块在整个区块链网络中进行广播。</li>
<li><strong>其他节点验证：</strong> 其他节点接收到新区块后，也会验证其中交易数据的合法性，并将其添加到自己的账本中。</li>
</ol>
<p>SR 持续重复此过程，确保 TRON 系统中所有新的交易数据都被及时记录到账本中。</p>
<h2 id="_4">超级代表的选举机制<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="_5">选票<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>在为 SR 投票之前，账户需要获得<strong>投票权</strong>，即 <strong>TRON Power (TP)</strong>。投票权通过<strong>质押 TRX</strong> 获得。除了获取带宽或能量，质押 TRX 还会同时为用户带来投票权。每质押 <strong>1 TRX</strong>，用户将获得 <strong>1 TP</strong>。</p>
<p>账户在解除 TRX 质押后，会失去相应数量的 TP，并且其当前进行的投票也将失效。选票每 <strong>6 小时</strong>统计一次，超级代表和超级代表合伙人也会每 6 小时更新一次。如果在选票统计前，一个账户进行了多次投票，TRON 网络只会记录该账户的<strong>最新一次投票</strong>，之前的投票将被覆盖。</p>
<h3 id="_6">投票过程<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>在 TRON 中，对候选人的投票被定义为一种特殊类型的<strong>交易</strong>。节点可以通过生成一笔投票交易来为候选人投票。</p>
<h3 id="_7">统计选票<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>每个<strong>维护期</strong>内，系统会统计一次所有候选人的得票数，并将获得票数最多的 <strong>27 个</strong>候选人选定为下一个出块周期的 SR。</p>
<h2 id="_8">产块机制<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>在一个<strong>出块轮</strong>中，27 个 SR 将按照<strong>产块顺序</strong>依次生产区块。每个 SR 只能在轮到自己产块时进行区块生产。</p>
<p>SR 将多笔验证合法的交易数据打包到每个区块中。同时，每个区块都会将上一个区块的 <strong>哈希值</strong>（<code>hash</code>）作为本区块的<strong>父哈希值</strong>（<code>parentHash</code>）填入。此外，SR 还会使用自己的私钥对本区块的数据进行签名，将<strong>签名结果</strong>（<code>witness_signature</code>）以及 SR 的地址、区块高度、区块生成时间等数据一并填入区块。</p>
<p>通过这种方式，每个区块都保存了上一个区块的哈希值，从而在逻辑上将区块相互关联起来，最终形成了区块链的链式结构。典型的区块链结构示意图如下：</p>
<p><img alt="blockchain_structure" src="https://raw.githubusercontent.com/tronprotocol/documentation-zh/master/images/blockchain_structure.png" /></p>
<p>理想情况下，采用 DPoS 共识的区块链系统记账过程应严格按照预先计算好的记账顺序，由超级代表轮流依序产块（如下图 a）。然而，实际的区块链网络是一个分布式、不可信的复杂系统，可能出现以下情况：</p>
<ol>
<li><strong>网络延迟：</strong> 由于网络链路环境不佳，超级代表生产的区块可能无法在有效时间内被其他超级代表收到（如下图 b1、b2）。</li>
<li><strong>节点故障：</strong> 某些超级代表可能无法始终正常运行（如下图 c）。</li>
<li><strong>恶意行为：</strong> 少数超级代表可能恶意生产分叉区块，试图分裂主链（如下图 d）。</li>
</ol>
<p><img alt="longest_chain1" src="https://raw.githubusercontent.com/tronprotocol/documentation-zh/master/images/longest_chain1.png" />
<img alt="longest_chain2" src="https://raw.githubusercontent.com/tronprotocol/documentation-zh/master/images/longest_chain2.png" /></p>
<p>如前文所述，区块链系统正常运行的基础是系统中绝大部分节点是诚实可靠的。进一步探讨这个问题，区块链系统安全的首要保证是账本的安全：账本既不能被恶意写入不合法数据，账本在各个节点上保存的副本也应该保持一致。从 DPoS 共识的角度来看，记账过程由超级代表完成，因此 TRON 的安全性取决于大多数超级代表的可靠性。</p>
<p>TRON 设定了<strong>不可逆转区块</strong>（或称<strong>固化块</strong>）机制，同时为了抵抗少数 SR 的恶意行为，TRON 采用基于<strong>最长链原则</strong>来确认主链。</p>
<h3 id="_9">固化块原则<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>新生产出的区块初始处于未确认状态。当一个区块被至少 <strong>70%</strong>（即 <span class="arithmatex"><span class="MathJax_Preview">27 \times 70\% \approx 19</span><script type="math/tex">27 \times 70\% \approx 19</script></span> 个，向上取整）的超级代表认可后，该区块被认为是<strong>不可逆区块</strong>，通常称为<strong>固化块</strong>。此时，固化块中包含的交易已被整个区块链网络确认。</p>
<p>此处对未确认状态区块的“认可”方式是：其他超级代表在该区块之后生产后续区块。例如，如图 d 所示，当超级代表 C 生产了第 103 块后，超级代表 E 在第 103 块的基础上生产了第 104' 块，超级代表 G、A、B 分别生产了第 105'、106'、107' 块，这些实质上都是第 103 块的后续区块，因此也是对 C 生产的第 103 块的认可。</p>
<p>由此可知，当高度为 121 的区块被生产出来时，第 103 块就成为了固化块，因为它此时已经有了 19 个后续区块。需要强调的是：生产这 19 个区块的超级代表必须<strong>互不相同</strong>，并且与生产第 103 个区块的超级代表也<strong>不同</strong>。</p>
<h3 id="_10">最长链原则<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>当区块链发生分叉时，诚实的超级代表总是会选择在当前<strong>最长</strong>的分叉链上继续生产区块。</p>
<h2 id="_11">激励模型<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<p>为了保证 TRON 区块链系统安全高效地运行，TRON 设计了激励模型，以鼓励更多节点加入 TRON 网络，从而扩大网络规模。</p>
<ul>
<li><strong>区块生产奖励：</strong> TRON 网络每成功生产一个区块，会向该区块的生产者（即对应的超级代表）奖励 <strong>8 TRX</strong>。该超级代表在根据其设定的佣金比例扣除佣金后，会将剩余部分根据投票者的投票权重分配给支持他们的选民。</li>
<li><strong>投票奖励：</strong> 随着每个区块的产生，TRON 网络还会向所有超级代表和超级代表合伙人额外奖励 <strong>128 TRX</strong>。这笔奖励将根据他们各自获得的投票比例进行分配。同样，超级代表和超级代表合伙人在根据其设定的佣金比例扣除佣金后，会将剩余的投票奖励根据选民的投票权重分发给对应的选民。</li>
</ul>
<h2 id="_12">基于提案的参数调整<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>DPoS 的一个重要特性是，任何系统参数的调整都可以通过<strong>链上提案</strong>发起。SR 通过对提案的投票来决定提案是否生效。这种机制的好处在于，在链上调整参数时，<strong>无需进行硬分叉升级</strong>。</p>
<p>目前 TRON 网络的动态参数及其值，以及过往的提案记录，请参考 <a href="https://tronscan.org/#/sr/committee">TRONSCAN 委员会页面</a>。</p>
<h2 id="_13">参考文档<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://medium.com/tronnetwork/the-basics-of-trons-dpos-consensus-algorithm-db12c52f1e03">The Basics of TRON’s DPoS Consensus Algorithm</a></li>
</ul>












		  <hr class="content-footer-divider">  <!-- 添加的水平线 -->
      	    	  <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../api/json-rpc/" class="md-footer__link md-footer__link--prev" aria-label="Previous: jsonRPC 接口">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                jsonRPC 接口
              </div>
            </div>
          </a>
        
        
          
          <a href="../sr/" class="md-footer__link md-footer__link--next" aria-label="Next: 超级代表">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                超级代表
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <!--div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div-->
</footer>
                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.footer", "toc.integrate", "search.highlight", "search.suggest", "content.code.annotate", "content.tooltips"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../javascripts/toc.js"></script>
      
        <script src="../../javascripts/nav-toc.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>